## 2024-05-24 - [Add Input Validation and Error Logging Securely]
**Vulnerability:** The `submitForm` Cloud Function lacked basic type checking, input length limits, and format validation (e.g., email), making it vulnerable to Denial of Service (DoS) attacks via large payloads, as well as NoSQL injection vectors.
**Learning:** Adding validation requires strict type checking before string manipulation (e.g., `.trim()`) to avoid Unhandled Promise Rejections (TypeErrors) when malicious clients send unexpected types like objects or arrays instead of strings. Additionally, it is critical to balance security (not leaking internal or 3rd-party API errors to the client) with observability (keeping the raw errors in the server logs so developers can debug).
**Prevention:** Always check types (`typeof val === 'string'`) before calling string methods. Limit input lengths systematically. Keep detailed errors in `console.error` server-side while returning generic 500 status messages to the client.
